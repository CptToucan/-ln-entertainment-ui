{{yield}}
{{log gameState}}
{{#let
  (find-own-player-state @gameState.gameState.playerState) as |ownPlayerState|
}}
  {{#if (eq @gameState.gameState.phase "BET")}}
    <h1 class="text-white text-2xl mb-2 flex flex-row">
      <div class="w-12 mr-4">
        {{gameState.gameState.timer}}s
      </div>
      to place your bets...
    </h1>
    <div class="flex flex-row items-center mb-4">
      <div
        class="rounded-full border-2 text-2xl font-bold border-blue-700 bg-blue-500 text-white w-16 h-16 flex justify-center items-center"
      >
        <span>
          {{ownPlayerState.totalMoney}}
        </span>
      </div>
      <span class="pl-4 font-bold text-white text-2xl">
        remaining bets
      </span>
    </div>

    {{#each @gameState.gameState.horses as |horse|}}
      <div
        class="flex flex-row justify-between border-0 border-b-2 border-red-900 mb-2 pb-2"
      >
        <div>
          <button
            class="w-12 rounded-full flex-auto bottom-0 shadow-md border-solid border-2 border-red-500 px-2 py-2 rounded hover:bg-red-500 text-white font-semibold"
            {{on "click" (fn this.decrementBet horse.name)}}
          >
            -
          </button>
        </div>

        <div class="text-white text-xl flex flex-col">
          <span class="text-center">
            {{horse.name}}
          </span>
          <span class="text-center">
            {{if
              (get currentPlayerState.bets horse.name)
              (get currentPlayerState.bets horse.name)
              0
            }} Bets

          (
            {{mult
              (if
                (get currentPlayerState.bets horse.name)
                (get currentPlayerState.bets horse.name)
                0
              )
              2
            }} Return)
          </span>
        </div>
        <div>
          <button
            class="w-12 rounded-full flex-auto mb-2 bottom-0 shadow-md border-solid border-2 border-red-500 px-2 py-2 rounded hover:bg-red-500 text-white font-semibold"
            {{on "click" (fn this.incrementBet horse.name)}}
          >
            +
          </button>
        </div>
      </div>
    {{/each}}
  {{/if}}

  {{#if (eq @gameState.gameState.phase "RACE")}}
    {{#if @gameState.gameState.race}}
      <div>
        <RaceView @race={{@gameState.gameState.race}} />
      </div>
    {{/if}}
  {{/if}}
  {{#if (eq @gameState.gameState.phase "RESULTS")}}
    <div>
      <RaceResults @gameState={{@gameState}} @race={{@gameState.gameState.race}}/>
    </div>
  {{/if}}

  {{#if (eq @gameState.gameState.phase "BUYING")}}
  {{/if}}
{{/let}}